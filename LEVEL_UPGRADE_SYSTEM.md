# ูุธุงู ุชุฑููุฉ ุงููุณุชูู ุงููุงูู - PromoHive

## ๐ ููุฎุต ุงููุธุงู

ูุธุงู ูุงูู ูุชุฑููุฉ ุงููุณุชูู ูุชุถูู ุงุฎุชูุงุฑ ูุณููุฉ ุงูุฏูุน ูุฅุถุงูุฉ ุฑูู ุงูุนูููุฉ ูุงูุชุญูู ูู ูุจู Admin.

---

## โ ุงูููููุงุช ุงููุถุงูุฉ

### 1. Database Schema (`prisma/schema.prisma`)

#### PaymentMethod Model:
```prisma
model PaymentMethod {
  id          String    @id @default(cuid())
  name        String    // "USDT (TRC20)"
  type        String    // "Crypto", "Bank", etc.
  address     String    // Wallet address
  network     String?   // "TRC20", "ERC20"
  qrCode      String?   // QR code URL
  isActive    Boolean   @default(true)
  description String?   @db.Text
  metadata    Json?
}
```

#### Updated LevelRequest Model:
```prisma
model LevelRequest {
  id              String             @id @default(cuid())
  userId          String
  requestedLevel  Int
  paymentMethodId String?            // NEW!
  paymentTxHash   String?            // NEW!
  paymentAmount   Decimal?           @db.Decimal(10, 2) // NEW!
  status          LevelRequestStatus @default(PENDING)
  ...
}
```

---

### 2. API Routes

#### For Users:
- **GET** `/api/payment-methods/active` - ุงูุญุตูู ุนูู ูุณุงุฆู ุงูุฏูุน ุงููุชุงุญุฉ
- **POST** `/api/user/level-upgrade` - ุทูุจ ุชุฑููุฉ ุงููุณุชูู ูุน ุฑูู ุงูุนูููุฉ

#### For Admins:
- **GET** `/api/payment-methods` - ุฌููุน ูุณุงุฆู ุงูุฏูุน
- **POST** `/api/payment-methods` - ุฅุถุงูุฉ ูุณููุฉ ุฏูุน ุฌุฏูุฏุฉ
- **PUT** `/api/payment-methods/:id` - ุชุญุฏูุซ ูุณููุฉ ุฏูุน
- **DELETE** `/api/payment-methods/:id` - ุญุฐู ูุณููุฉ ุฏูุน
- **GET** `/api/admin/level-requests` - ุทูุจุงุช ุงูุชุฑููุฉ ูุน ุจูุงูุงุช ุงูุฏูุน
- **POST** `/api/admin/level-requests/:id/process` - ูุนุงูุฌุฉ ุงูุทูุจ

---

### 3. ูุณุงุฑ ุงูุนูู ุงููุงูู

#### ููุนููู:
```
1. ูุฎุชุงุฑ ุงููุณุชูู ุงููุฑุงุฏ ุชุฑููุชู (L1, L2, L3)
2. ุงููุธุงู ูุนุฑุถ:
   - ุชูููุฉ ุงูุชุฑููุฉ
   - ูุณุงุฆู ุงูุฏูุน ุงููุชุงุญุฉ (ุงูุชู ุญุฏุฏูุง Admin)
   - ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ ุงูุณุฑูุนุฉ QR Code
   - ุนููุงู ุงููุญูุธุฉ
3. ุงูุนููู ูุฎุชุงุฑ ูุณููุฉ ุฏูุน
4. ุงูุนููู ูุฑุณู ุงููุจูุบ ุนูู ุงูุนููุงู ุงููุญุฏุฏ
5. ุงูุนููู ูุฏุฎู ุฑูู ุงูุนูููุฉ (Transaction Hash)
6. ุงูุนููู ูุฑุณู ุงูุทูุจ
7. ููุชุธุฑ ููุงููุฉ Admin
```

#### ููู Admin:
```
1. ูุณุชูุจู ุทูุจ ุงูุชุฑููุฉ ูุน:
   - ูุนูููุงุช ุงูุนููู
   - ุงููุณุชูู ุงููุทููุจ
   - ูุณููุฉ ุงูุฏูุน ุงููุฎุชุงุฑุฉ
   - ุนููุงู ุงูุฏูุน
   - ุฑูู ุงูุนูููุฉ (TxHash)
   - ุงููุจูุบ ุงููุฏููุน
2. Admin ูุชุญูู ูู:
   - ุตุญุฉ ุฑูู ุงูุนูููุฉ ุนูู Blockchain
   - ูุทุงุจูุฉ ุงููุจูุบ ุงููุทููุจ
   - ุตุญุฉ ุงูุญุณุงุจ ูุงูุนููู
3. Admin ููุงูู ุฃู ูุฑูุถ:
   - ุงูููุงููุฉ: ุชุฑููุฉ ุงููุณุชูู + ุฅุฑุณุงู ุจุฑูุฏ ููุงููุฉ
   - ุงูุฑูุถ: ุฅุฑุฌุงุน ุงููุจูุบ + ุฅุฑุณุงู ุจุฑูุฏ ุฑูุถ ูุน ุงูุณุจุจ
```

---

### 4. ุฃูุซูุฉ ุงูุทูุจุงุช

#### ุทูุจ ุชุฑููุฉ ูุณุชูู ูู ุงูุนููู:
```json
POST /api/user/level-upgrade
{
  "requestedLevel": 2,
  "paymentMethodId": "crypto-usdt-tron",
  "paymentTxHash": "abc123def456...",
  "paymentAmount": 50.00
}
```

#### ุงูุญุตูู ุนูู ูุณุงุฆู ุงูุฏูุน:
```json
GET /api/payment-methods/active

Response:
{
  "success": true,
  "paymentMethods": [
    {
      "id": "crypto-usdt-tron",
      "name": "USDT (TRC20)",
      "type": "Crypto",
      "address": "TXYZ1234...",
      "network": "TRC20",
      "qrCode": "https://...",
      "description": "Send USDT via TRC20"
    }
  ]
}
```

---

### 5. ุฅุฏุงุฑุฉ ูุณุงุฆู ุงูุฏูุน (Admin)

#### ุฅุถุงูุฉ ูุณููุฉ ุฏูุน:
```json
POST /api/payment-methods
{
  "name": "USDT (TRC20)",
  "type": "Crypto",
  "address": "TXYZ1234567890abcdef...",
  "network": "TRC20",
  "qrCode": "https://api.qrserver.com/v1/create-qr-code/?data=TXYZ...",
  "description": "Pay with USDT via TRC20 network",
  "isActive": true
}
```

#### ุนุฑุถ ุทูุจุงุช ุงูุชุฑููุฉ (ูุน ุจูุงูุงุช ุงูุฏูุน):
```json
GET /api/admin/level-requests

Response:
{
  "success": true,
  "levelRequests": [
    {
      "id": "...",
      "user": {
        "username": "john_doe",
        "email": "john@example.com",
        "level": 1
      },
      "requestedLevel": 2,
      "paymentMethod": {
        "name": "USDT (TRC20)",
        "address": "TXYZ...",
        "network": "TRC20"
      },
      "paymentTxHash": "abc123...",
      "paymentAmount": 50.00,
      "status": "PENDING",
      "createdAt": "2024-..."
    }
  ]
}
```

---

## โ ุงูุฃูุงู ูุงูุชุญูู

### ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช:
- โ ุงูุชุญูู ูู ุงููุณุชูู ุงููุทููุจ (1-3 ููุท)
- โ ุงูุชุญูู ูู ูุฌูุฏ ูุณููุฉ ุฏูุน ุตุงูุญุฉ
- โ ุงูุชุญูู ูู ุงููุจูุบ ุงููุฏููุน โฅ ุงููุจูุบ ุงููุทููุจ
- โ ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุทูุจ ูุนูู ุณุงุจู
- โ ุงูุชุญูู ูู ุตุญุฉ ุฑูู ุงูุนูููุฉ (ูุฏูู ูู Admin)

### ููุน ุงูุฅุฌุฑุงุกุงุช ุงููุชูุฑุฑุฉ:
- โ ูุง ูููู ุทูุจ ุชุฑููุฉ ูุณุชูู ุฃูู ุฃู ูุณุงูู
- โ ูุง ูููู ุนูู ุทูุจ ุฌุฏูุฏ ูุน ูุฌูุฏ ุทูุจ ูุนูู
- โ ูุง ูููู ุงุณุชุฎุฏุงู ูุณููุฉ ุฏูุน ุบูุฑ ูุดุทุฉ

---

## ๐ง ุฑุณุงุฆู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุนูุฏ ุงูููุงููุฉ:
- โ `sendLevelUpgradeApprovedEmail` - ุจุฑูุฏ ููุงููุฉ ุงูุชุฑููุฉ

### ุนูุฏ ุงูุฑูุถ:
- โ `sendLevelUpgradeRejectedEmail` - ุจุฑูุฏ ุฑูุถ ุงูุชุฑููุฉ ูุน ุงูุณุจุจ

---

## ๐ฏ ุงูุฎุทูุงุช ุงููุชุจููุฉ

1. โ ุฅุถุงูุฉ PaymentMethod table
2. โ ุฅุถุงูุฉ ุญููู payment ุฅูู LevelRequest
3. โ ุฅูุดุงุก API ููุณุงุฆู ุงูุฏูุน
4. โ ุชุญุฏูุซ ูุธุงู ุทูุจ ุงูุชุฑููุฉ
5. โ ุชุญุฏูุซ ูุธุงู ุนุฑุถ ุทูุจุงุช ุงูุชุฑููุฉ
6. โ ุฅุถุงูุฉ ุฑุณุงุฆู ุจุฑูุฏูุฉ
7. โณ ุฅูุดุงุก ูุงุฌูุฉ ุงููุณุชุฎุฏู (Frontend)
8. โณ ุงุฎุชุจุงุฑ ุงููุธุงู ุจุงููุงูู

---

## ๐ ุชุดุบูู ุงููุธุงู

```bash
# ุชุทุจูู Migration
npx prisma migrate dev --name add_payment_methods

# ุชูููุฏ Prisma Client
npx prisma generate

# ุชุดุบูู ุงููุธุงู
npm run dev
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **Admin ูุฌุจ ุฃู ูุญุฏุฏ ูุณุงุฆู ุงูุฏูุน ุฃููุงู** ูุจู ุฃู ูุชููู ุงููุณุชุฎุฏููู ูู ุทูุจ ุงูุชุฑููุฉ
2. **ุฑูู ุงูุนูููุฉ** ูุฌุจ ุฃู ูุชุญูู ููู Admin ูุฏููุงู ุนูู Blockchain
3. **ุงููุจูุบ** ูุฌุจ ุฃู ูุทุงุจู ุชูุงูุงู ุงููุจูุบ ุงููุทููุจ
4. **ุงููุธุงู ูุฏุนู** ุนุฏุฉ ูุณุงุฆู ุฏูุน ูุชุฒุงููุฉ

---

**๐ ุงููุธุงู ุฌุงูุฒ ููุชุทุจูู ูุงูุงุฎุชุจุงุฑ!**

